{"version":3,"file":"static/webpack/static/development/pages/index.js.4b1d90e43aeaf0460ac3.hot-update.js","sources":["webpack:///./pages/index.tsx","webpack:///./utils/hooks/useResizeCallback.ts"],"sourcesContent":["import * as React from 'react';\nimport styles from './index.less';\nimport LayoutHeader from '../components/LayoutHeader';\nimport Profile from '../components/Profile';\nimport {\n  CurrentTabProvider,\n  useCurrentTab\n} from '../utils/hooks/useCurrentTab';\nimport Projects from '../components/Projects';\nimport { ContentSwitcher } from '../components/ContentSwitcher';\nimport { useComponentDidMount } from '../utils/hooks/useComponentDidMount';\nimport { useEffect, useState } from 'react';\nimport { useResizeCallback } from '../utils/hooks/useResizeCallback';\nconst DESIGN_WIDTH = 1920;\nconst InnerLayout: React.FC<{}> = () => {\n  const {\n    state: {\n      scale: { scale }\n    },\n    actions: { setScale }\n  } = useCurrentTab();\n  const fallBackReactive = () => {\n    const scale = Math.min(document.body.clientWidth / 1920, 1);\n    let metaEl = document.querySelector('meta[name=\"viewport\"]');\n    if (!metaEl) {\n      metaEl = document.createElement('meta');\n      metaEl.setAttribute('name', 'viewport');\n      metaEl.setAttribute(\n        'content',\n        'width=device-width, initial-scale=' +\n          scale +\n          ', maximum-scale=' +\n          scale +\n          ', minimum-scale=' +\n          scale +\n          ', user-scalable=no'\n      );\n      document.documentElement.firstElementChild.appendChild(metaEl);\n    } else {\n      metaEl.setAttribute(\n        'content',\n        'width=device-width, initial-scale=' +\n          scale +\n          ', maximum-scale=' +\n          scale +\n          ', minimum-scale=' +\n          scale +\n          ', user-scalable=no'\n      );\n    }\n\n    window.scrollTo({\n      top: 0\n    });\n    setScale(1);\n  };\n  const { IsDone } = useComponentDidMount(() => {\n    const scale = Math.min(document.body.clientWidth / DESIGN_WIDTH, 1);\n    setScale(scale);\n    addCallback(() => {\n      const scale = Math.min(document.body.clientWidth / DESIGN_WIDTH, 1);\n      document.getElementsByTagName('html')[0].style.fontSize = `${scale}px`;\n      window.scrollTo({\n        top: 0\n      });\n      setScale(scale);\n    });\n  });\n  useEffect(() => {\n    document.getElementsByTagName('html')[0].style.fontSize = `${scale}px`;\n    window.scrollTo({\n      top: 0\n    });\n  }, [scale]);\n  const { addCallback } = useResizeCallback(fallBackReactive);\n  return IsDone ? (\n    <div className={styles.layout}>\n      <LayoutHeader />\n      <ContentSwitcher>\n        <>\n          <Profile />\n          <Projects />\n        </>\n      </ContentSwitcher>\n      <LayoutHeader\n        bodyStyle={{\n          marginTop: '138rem'\n        }}\n      />\n    </div>\n  ) : null;\n};\n\nconst Layout: React.FC<{}> = () => {\n  return (\n    <CurrentTabProvider>\n      <InnerLayout />\n    </CurrentTabProvider>\n  );\n};\n\nexport default Layout;\n","import { useComponentDidMount } from './useComponentDidMount';\nimport debounce from 'lodash/debounce';\nlet callback_queue = [];\nexport const useResizeCallback = (fallBackHandler?: () => any) => {\n  useComponentDidMount(() => {\n    window.onresize = debounce(e => {\n      if (e.target.innerWidth < 768) {\n        fallBackHandler && fallBackHandler();\n        return;\n      }\n      callback_queue.forEach(callback => {\n        callback();\n      });\n    }, 500);\n  });\n\n  function addCallback(callback) {\n    callback_queue.push(callback);\n  }\n  return { addCallback };\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAMA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAUA;AACA;AACA;AAUA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AA1CA;AA2CA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AArDA;AACA;AAqDA;AACA;AACA;AACA;AADA;AAGA;AACA;AA5DA;AAAA;AACA;AA4DA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AADA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;;;;;;;;;;;;ACrGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;;;;A","sourceRoot":""}