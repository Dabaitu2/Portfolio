{"version":3,"file":"static/webpack/static/development/pages/index.js.d29ee07b0031f23d7c42.hot-update.js","sources":["webpack:///./components/LayoutHeader/index.tsx","webpack:///./pages/index.tsx"],"sourcesContent":["import * as React from 'react';\nimport styles from './index.module.less';\nimport {\n  CSSProperties,\n  useCallback,\n  useContext,\n  useEffect,\n  useRef,\n  useState\n} from 'react';\nimport { useCurrentTab } from '../../utils/hooks/useCurrentTab';\n\ninterface MenuItem {\n  key: string;\n  label: string;\n}\n\ninterface IProps {\n  bodyStyle?: CSSProperties;\n}\n\nconst MenuItems: MenuItem[] = [\n  {\n    key: 'aboutMe',\n    label: 'About Me'\n  },\n  {\n    key: 'projects',\n    label: 'Projects'\n  }\n];\n\n/**\n * React-Hooks is much more powerful than you thought\n * @constructor\n */\nconst LayoutHeader: React.FC<IProps> = props => {\n  const {\n    state: {\n      currentTab: { currentTab }\n    },\n    actions: { setCurrentTab }\n  } = useCurrentTab();\n  // 设置小圆点的位置\n  const [firstLoaded, setFirstLoaded] = useState(false);\n  const [dotX, setDotX] = useState(0);\n  const bodyWidth = useRef(null);\n  const _MenuItems = MenuItems.map(item => ({\n    ...item,\n    ref: React.useRef()\n  }));\n  const menuItemClickHandler = useCallback(\n    item => () => {\n      if (!firstLoaded) {\n        return;\n      }\n      const findIndex = _MenuItems.findIndex(m => {\n        return m.key === item.key;\n      });\n      if (!~findIndex) {\n        return;\n      }\n      const pageOffSetLeft = (bodyWidth.current - 1600) / 2;\n      const offsetLeft = item.ref.current.offsetLeft;\n      const offsetWidth = item.ref.current.offsetWidth;\n      setDotX(offsetLeft + offsetWidth / 2 - pageOffSetLeft - 8);\n      setCurrentTab(findIndex);\n    },\n    [bodyWidth, firstLoaded]\n  );\n  // 判断是否是第一次渲染\n  useEffect(() => {\n    if (!firstLoaded) {\n      setFirstLoaded(true);\n    }\n  }, []);\n  // 根据不是第一次渲染，来模拟componentDidMount 拿document 对象\n  useEffect(() => {\n    if (firstLoaded) {\n      bodyWidth.current = document.getElementsByTagName('body')[0].offsetWidth;\n      menuItemClickHandler(_MenuItems[currentTab])();\n    }\n  }, [firstLoaded]);\n  useEffect(() => {\n    menuItemClickHandler(_MenuItems[currentTab])();\n  }, [currentTab]);\n  return (\n    <div style={props.bodyStyle ?? {}}>\n      <div className={styles['layout-menu-container']}>\n        {_MenuItems.map(item => (\n          <span\n            key={item.key}\n            ref={item.ref}\n            className={styles['layout-menu-item']}\n            onClick={menuItemClickHandler(item)}\n          >\n            {item.label}\n          </span>\n        ))}\n      </div>\n      <div className={styles['layout-slider']}>\n        <span\n          className={styles['layout-slider-dot']}\n          style={{\n            transform: `translate(${dotX}px, -8px)`\n          }}\n        />\n        <div className={styles['layout-slider-line']} />\n      </div>\n    </div>\n  );\n};\n\nexport default LayoutHeader;\n","import * as React from 'react';\nimport styles from './index.less';\nimport LayoutHeader from '../components/LayoutHeader';\nimport Profile from '../components/Profile';\nimport { CurrentTabProvider } from '../utils/hooks/useCurrentTab';\nimport Projects from '../components/Projects';\nimport { ContentSwitcher } from '../components/ContentSwitcher';\nimport { useEffect, useRef, useState } from 'react';\n\nconst Layout: React.FC<{}> = () => {\n  const containerRef = useRef(null);\n  const [scale, setScale] = useState(1);\n  useEffect(() => {\n    const scale = Math.min(document.body.clientWidth / 1920, 1);\n    window.scrollTo({\n      top: 0\n    });\n    setScale(scale);\n  }, [containerRef.current]);\n  return (\n    <CurrentTabProvider>\n      <div\n        className={styles.layout}\n        style={{\n          transform: `scale(${scale})`\n        }}\n      >\n        <LayoutHeader />\n        {/*<ContentSwitcher>*/}\n        {/*  <>*/}\n        {/*    <Profile />*/}\n        {/*    <Projects />*/}\n        {/*  </>*/}\n        {/*</ContentSwitcher>*/}\n        <LayoutHeader\n          bodyStyle={{\n            marginTop: '138px'\n          }}\n        />\n      </div>\n    </CurrentTabProvider>\n  );\n};\n\nexport default Layout;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAQA;AAWA;AAEA;AACA;AAFA;AAKA;AACA;AAFA;AAMA;;;;;AAIA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AASA;AACA;AAAA;AAAA;AAEA;AAFA;AAAA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAfA;AACA;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AADA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjHA;AACA;AACA;AAEA;AAGA;AACA;AACA;AACA;AACA;AAFA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AADA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AADA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AACA;;;;A","sourceRoot":""}