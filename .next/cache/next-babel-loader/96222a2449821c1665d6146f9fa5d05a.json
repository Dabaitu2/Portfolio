{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nvar _jsxFileName = \"/Users/tomokokawase/Desktop/Portfolio/pages/projects/string-board.tsx\";\nvar __jsx = React.createElement;\nimport * as React from 'react';\nimport styles from '../index.less';\nimport LayoutHeader from '../../components/LayoutHeader';\nimport { createCurrentTab } from '../../utils/hooks/useCurrentTab';\nimport { ContentSwitcher } from '../../components/ContentSwitcher';\nimport { useComponentDidMount } from '../../utils/hooks/useComponentDidMount';\nimport { useEffect, useState } from 'react';\nimport { useResizeCallback } from '../../utils/hooks/useResizeCallback';\nimport ProjectDetailItem from '../../components/Projects/ProjectDetail';\nimport Profile from '../../components/Profile';\nimport Projects from '../../components/Projects';\nvar DESIGN_WIDTH = 1920;\n\nvar _createCurrentTab = createCurrentTab({\n  currentTab: {\n    currentTab: 1\n  }\n}),\n    CurrentTabProvider = _createCurrentTab.CurrentTabProvider,\n    useCurrentTab = _createCurrentTab.useCurrentTab;\n\nvar COMMON_STATIC_PATH = '/static/images/projectDetails/img';\nvar Info = {\n  images: [{\n    src: COMMON_STATIC_PATH + '1.jpg',\n    sources: [{\n      src: COMMON_STATIC_PATH + '1.webp',\n      type: 'image/webp'\n    }],\n    preview_src: COMMON_STATIC_PATH + '1-preview.jpg',\n    preview_sources: [{\n      src: COMMON_STATIC_PATH + '1-preview.webp',\n      type: 'image/webp'\n    }],\n    alt: 'String board'\n  }],\n  mainColor: '#81501E',\n  title: 'Stringboard',\n  desc: ['an input tool and', 'an electronic instrument'],\n  tags: 'Integrated Product Development | Interaction Design | Personal Work | Apr 2017 '.split('|').map(function (t) {\n    return t.trim();\n  }),\n  details: 'Stringboard is an input tool as well as an electronic instrument, inspired by Chinese instrument Guqin, bringing the ancient Chinese poetic experience to modern life. \\n' + 'Stringboard comes from the combination of “string” and “board”. The long-shaped metal “string” imitates the image of the string, applying the surface acoustic wave touch technology, so that the user only needs to stroke slightly to input information and use unique shortcut input gesture. The stroking and swiping finger gestures are like playing the Guqin. And Stringboard applys natural material, such as black walnut or bamboo, which highlights the metal string at the same time.'\n};\n\nvar InnerLayout = function InnerLayout() {\n  var _useCurrentTab = useCurrentTab(),\n      scale = _useCurrentTab.state.scale.scale,\n      setScale = _useCurrentTab.actions.setScale;\n\n  var _useState = useState(true),\n      isLoading = _useState[0],\n      setIsLoading = _useState[1];\n\n  var fallBackReactive = function fallBackReactive() {\n    setScale(1);\n    var scale = Math.min(document.body.clientWidth / 1920, 1);\n    var metaEl = document.querySelector('meta[name=\"viewport\"]');\n\n    if (!metaEl) {\n      metaEl = document.createElement('meta');\n      metaEl.setAttribute('name', 'viewport');\n      metaEl.setAttribute('content', 'width=device-width, initial-scale=' + scale + ', maximum-scale=' + scale + ', minimum-scale=' + scale + ', user-scalable=no');\n      document.documentElement.firstElementChild.appendChild(metaEl);\n    } else {\n      metaEl.setAttribute('content', 'width=device-width, initial-scale=' + scale + ', maximum-scale=' + scale + ', minimum-scale=' + scale + ', user-scalable=no');\n    }\n\n    window.scrollTo({\n      top: 0\n    });\n  }; // innerWidth 比 body.offsetWidth 稳定\n\n\n  var _useComponentDidMount = useComponentDidMount(function () {\n    if (window.innerWidth >= 700) {\n      var _scale = Math.max(Math.min(window.innerWidth / DESIGN_WIDTH, 1), 0.2);\n\n      setScale(_scale);\n    } else {\n      fallBackReactive();\n    }\n\n    addCallback(function () {\n      var scale = Math.max(Math.min(window.innerWidth / DESIGN_WIDTH, 1), 0.2);\n      document.getElementsByTagName('html')[0].style.fontSize = \"\".concat(scale, \"px\");\n      window.scrollTo({\n        top: 0\n      });\n      setScale(scale);\n    });\n  }),\n      IsDone = _useComponentDidMount.IsDone;\n\n  useEffect(function () {\n    setIsLoading(true);\n    document.getElementsByTagName('html')[0].style.fontSize = \"\".concat(scale, \"px\");\n    window.scrollTo({\n      top: 0\n    }); // 强行将这次setState推迟到下次处理\n\n    setTimeout(function () {\n      setIsLoading(false);\n    }, 0);\n  }, [scale]);\n\n  var _useResizeCallback = useResizeCallback(fallBackReactive),\n      addCallback = _useResizeCallback.addCallback;\n\n  return IsDone && !isLoading ? __jsx(\"div\", {\n    className: styles.layout,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, __jsx(LayoutHeader, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }), __jsx(ContentSwitcher, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, __jsx(Profile, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }), __jsx(ProjectDetailItem, _extends({}, Info, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  })), __jsx(Projects, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  })), __jsx(LayoutHeader, {\n    bodyStyle: {\n      marginTop: '138rem'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  })) : null;\n};\n\nvar Layout = function Layout() {\n  return __jsx(CurrentTabProvider, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }, __jsx(InnerLayout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }));\n};\n\nexport default Layout;","map":{"version":3,"sources":["/Users/tomokokawase/Desktop/Portfolio/pages/projects/string-board.tsx"],"names":["React","styles","LayoutHeader","createCurrentTab","ContentSwitcher","useComponentDidMount","useEffect","useState","useResizeCallback","ProjectDetailItem","Profile","Projects","DESIGN_WIDTH","currentTab","CurrentTabProvider","useCurrentTab","COMMON_STATIC_PATH","Info","images","src","sources","type","preview_src","preview_sources","alt","mainColor","title","desc","tags","split","map","t","trim","details","InnerLayout","scale","state","setScale","actions","isLoading","setIsLoading","fallBackReactive","Math","min","document","body","clientWidth","metaEl","querySelector","createElement","setAttribute","documentElement","firstElementChild","appendChild","window","scrollTo","top","innerWidth","max","addCallback","getElementsByTagName","style","fontSize","IsDone","setTimeout","layout","marginTop","Layout"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport styles from '../index.less';\nimport LayoutHeader from '../../components/LayoutHeader';\nimport {\n  createCurrentTab,\n} from '../../utils/hooks/useCurrentTab';\nimport { ContentSwitcher } from '../../components/ContentSwitcher';\nimport { useComponentDidMount } from '../../utils/hooks/useComponentDidMount';\nimport { useEffect, useState } from 'react';\nimport { useResizeCallback } from '../../utils/hooks/useResizeCallback';\nimport ProjectDetailItem, {\n  ProjectDetailInfoProps\n} from '../../components/Projects/ProjectDetail';\nimport Profile from '../../components/Profile';\nimport Projects from '../../components/Projects';\nconst DESIGN_WIDTH = 1920;\nconst { CurrentTabProvider, useCurrentTab } = createCurrentTab({\n  currentTab: {\n    currentTab: 1\n  }\n});\nconst COMMON_STATIC_PATH = '/static/images/projectDetails/img';\nconst Info: ProjectDetailInfoProps = {\n  images: [\n    {\n      src: COMMON_STATIC_PATH + '1.jpg',\n      sources: [\n        {\n          src: COMMON_STATIC_PATH + '1.webp',\n          type: 'image/webp'\n        }\n      ],\n      preview_src: COMMON_STATIC_PATH + '1-preview.jpg',\n      preview_sources: [\n        {\n          src: COMMON_STATIC_PATH + '1-preview.webp',\n          type: 'image/webp'\n        }\n      ],\n      alt: 'String board'\n    }\n  ],\n  mainColor: '#81501E',\n  title: 'Stringboard',\n  desc: ['an input tool and', 'an electronic instrument'],\n  tags: 'Integrated Product Development | Interaction Design | Personal Work | Apr 2017 '\n    .split('|')\n    .map(t => t.trim()),\n  details:\n    'Stringboard is an input tool as well as an electronic instrument, inspired by Chinese instrument Guqin, bringing the ancient Chinese poetic experience to modern life. \\n' +\n    'Stringboard comes from the combination of “string” and “board”. The long-shaped metal “string” imitates the image of the string, applying the surface acoustic wave touch technology, so that the user only needs to stroke slightly to input information and use unique shortcut input gesture. The stroking and swiping finger gestures are like playing the Guqin. And Stringboard applys natural material, such as black walnut or bamboo, which highlights the metal string at the same time.'\n};\nconst InnerLayout: React.FC<{}> = () => {\n  const {\n    state: {\n      scale: { scale }\n    },\n    actions: { setScale }\n  } = useCurrentTab();\n  const [isLoading, setIsLoading] = useState(true);\n  const fallBackReactive = () => {\n    setScale(1);\n    const scale = Math.min(document.body.clientWidth / 1920, 1);\n    let metaEl = document.querySelector('meta[name=\"viewport\"]');\n    if (!metaEl) {\n      metaEl = document.createElement('meta');\n      metaEl.setAttribute('name', 'viewport');\n      metaEl.setAttribute(\n        'content',\n        'width=device-width, initial-scale=' +\n          scale +\n          ', maximum-scale=' +\n          scale +\n          ', minimum-scale=' +\n          scale +\n          ', user-scalable=no'\n      );\n      document.documentElement.firstElementChild.appendChild(metaEl);\n    } else {\n      metaEl.setAttribute(\n        'content',\n        'width=device-width, initial-scale=' +\n          scale +\n          ', maximum-scale=' +\n          scale +\n          ', minimum-scale=' +\n          scale +\n          ', user-scalable=no'\n      );\n    }\n\n    window.scrollTo({\n      top: 0\n    });\n  };\n  // innerWidth 比 body.offsetWidth 稳定\n  const { IsDone } = useComponentDidMount(() => {\n    if (window.innerWidth >= 700) {\n      const scale = Math.max(\n        Math.min(window.innerWidth / DESIGN_WIDTH, 1),\n        0.2\n      );\n      setScale(scale);\n    } else {\n      fallBackReactive();\n    }\n    addCallback(() => {\n      const scale = Math.max(\n        Math.min(window.innerWidth / DESIGN_WIDTH, 1),\n        0.2\n      );\n      document.getElementsByTagName('html')[0].style.fontSize = `${scale}px`;\n      window.scrollTo({\n        top: 0\n      });\n      setScale(scale);\n    });\n  });\n  useEffect(() => {\n    setIsLoading(true);\n    document.getElementsByTagName('html')[0].style.fontSize = `${scale}px`;\n    window.scrollTo({\n      top: 0\n    });\n    // 强行将这次setState推迟到下次处理\n    setTimeout(() => {\n      setIsLoading(false);\n    }, 0);\n  }, [scale]);\n  const { addCallback } = useResizeCallback(fallBackReactive);\n  return IsDone && !isLoading ? (\n    <div className={styles.layout}>\n      <LayoutHeader/>\n      <ContentSwitcher>\n        <Profile />\n        <ProjectDetailItem {...Info} />\n        <Projects />\n      </ContentSwitcher>\n      <LayoutHeader\n        bodyStyle={{\n          marginTop: '138rem'\n        }}\n      />\n    </div>\n  ) : null;\n};\n\nconst Layout: React.FC<{}> = () => {\n  return (\n    <CurrentTabProvider>\n      <InnerLayout />\n    </CurrentTabProvider>\n  );\n};\n\nexport default Layout;\n"]},"metadata":{},"sourceType":"module"}