{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { useEffect } from 'react';\nimport styles from './index.module.less';\nimport LazyLoadImg from '../../common/LazyLoadImg';\nexport const ProjectDetailItem = props => {\n  const {\n    images,\n    title,\n    desc,\n    tags,\n    details,\n    mainColor,\n    detail_images_meta,\n    video,\n    affix_image_meta\n  } = props;\n  const videoRef = React.useRef();\n  const [played, setPlayed] = React.useState(undefined);\n  useEffect(() => {\n    if (videoRef.current && document) {\n      document.onscroll = () => {\n        if (videoRef.current.getBoundingClientRect().top < 700) {\n          if (played === undefined) {\n            videoRef.current.play();\n            setPlayed(true);\n          }\n        } else if (videoRef.current.getBoundingClientRect().bottom < 150) {\n          videoRef.current.pause();\n          setPlayed(false);\n        }\n      };\n    }\n  }, [videoRef, document, played]);\n  return __jsx(\"div\", {\n    className: styles['project-detail-item'],\n    style: {\n      color: mainColor\n    }\n  }, __jsx(\"div\", {\n    className: styles['project-detail-images']\n  }, images.map(image => __jsx(LazyLoadImg, _extends({}, image, {\n    className: styles['project-detail-image']\n  })))), __jsx(\"div\", null, __jsx(\"div\", {\n    className: styles['project-detail-title']\n  }, title), __jsx(\"div\", {\n    className: styles['project-detail-subtitle']\n  }, desc.map(d => __jsx(\"span\", null, d)))), __jsx(\"div\", {\n    className: styles['project-detail-details'],\n    style: {\n      backgroundColor: mainColor\n    }\n  }, __jsx(\"div\", {\n    className: styles['project-detail-tags']\n  }, tags.map(t => __jsx(\"span\", null, t))), __jsx(\"span\", null, details)), __jsx(\"div\", {\n    style: {\n      fontSize: 0\n    }\n  }, Array.from({\n    length: detail_images_meta.num\n  }).map((_, i) => {\n    if (i === 0) {\n      return;\n    }\n\n    const common_file = detail_images_meta.dir + '/' + (i + 1).toString();\n    return __jsx(LazyLoadImg, {\n      src: common_file + '.jpg',\n      sources: [{\n        type: 'image/webp',\n        src: common_file + '.webp'\n      }],\n      preview_src: common_file + '-preview.jpg',\n      preview_sources: [{\n        type: 'image/webp',\n        src: common_file + '-preview.webp'\n      }],\n      className: styles['project-detail-details-images']\n    });\n  }), video ? video.map(v => {\n    return __jsx(\"div\", {\n      style: {\n        width: '1600rem',\n        position: 'relative'\n      },\n      onClick: () => {\n        if (played) {\n          videoRef.current.pause();\n          setPlayed(false);\n        } else {\n          videoRef.current.play();\n          setPlayed(true);\n        }\n      }\n    }, __jsx(\"div\", {\n      style: {\n        letterSpacing: '30rem',\n        fontFamily: 'Sofia Pro Regular',\n        fontSize: '100rem',\n        lineHeight: '900rem',\n        textAlign: 'center',\n        overflow: 'hidden',\n        color: '#fff',\n        position: 'absolute',\n        width: '100%',\n        display: played == true ? 'none' : 'block'\n      }\n    }, \"PAUSE\"), __jsx(\"video\", {\n      src: v.src,\n      ref: videoRef,\n      autoPlay: false,\n      style: {\n        width: '100%',\n        float: 'left'\n      }\n    }));\n  }) : null, affix_image_meta ? Array.from({\n    length: affix_image_meta.num\n  }).map((_, i) => {\n    if (i === 0) {\n      return;\n    }\n\n    const common_file = affix_image_meta.dir + '/' + (detail_images_meta.num + i + 1).toString();\n    return __jsx(LazyLoadImg, {\n      src: common_file + '.jpg',\n      sources: [{\n        type: 'image/webp',\n        src: common_file + '.webp'\n      }],\n      preview_src: common_file + '-preview.jpg',\n      preview_sources: [{\n        type: 'image/webp',\n        src: common_file + '-preview.webp'\n      }],\n      className: styles['project-detail-details-images']\n    });\n  }) : null));\n};\nexport default ProjectDetailItem;","map":null,"metadata":{},"sourceType":"module"}