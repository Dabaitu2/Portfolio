{"ast":null,"code":"var _jsxFileName = \"/Users/tomokokawase/Desktop/Portfolio/pages/projects/flyro.tsx\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from 'react';\nimport styles from '../index.less';\nimport LayoutHeader from '../../components/LayoutHeader';\nimport { useCurrentTab, CurrentTabProvider } from '../../utils/hooks/useCurrentTab';\nimport { ContentSwitcher } from '../../components/ContentSwitcher';\nimport { useComponentDidMount } from '../../utils/hooks/useComponentDidMount';\nimport { useEffect, useState } from 'react';\nimport { useResizeCallback } from '../../utils/hooks/useResizeCallback';\nimport ProjectDetailItem from '../../components/Projects/ProjectDetail';\nimport Profile from '../../components/Profile';\nimport Projects from '../../components/Projects';\nconst DESIGN_WIDTH = 1920;\nconst COMMON_STATIC_PATH = '/static/images/projectDetails/img';\nconst Info = {\n  title: 'Flyro',\n  desc: ['an inspiring spinning and', 'a mobile free zone'],\n  mainColor: '#1F204F',\n  details: 'To create a phone free zone, we offer you the optimal choice — flyro.It is a floating gyro, which can block and charge your phone.\\n' + 'Once you plug in the phone, the gyro can be empowered and spin during your working time. If you plug out from the plate, it would lose power and stop after 15 minutes.\\n' + 'Flyro helps you find the balance between work and play.',\n  tags: ['Integrated Product Development | Interaction Design | Team Work in 5 weeks | May 2018 '],\n  images: [{\n    src: COMMON_STATIC_PATH + '3.jpg',\n    sources: [{\n      src: COMMON_STATIC_PATH + '3.webp',\n      type: 'image/webp'\n    }],\n    preview_src: COMMON_STATIC_PATH + '3-preview.jpg',\n    preview_sources: [{\n      src: COMMON_STATIC_PATH + '3-preview.webp',\n      type: 'image/webp'\n    }],\n    alt: 'Flyro'\n  }],\n  detail_images_meta: {\n    dir: '/static/images/projectDetails/flyro',\n    num: 12\n  },\n  video: [{\n    src: '/static/video.mp4'\n  }],\n  affix_image_meta: {\n    dir: '/static/images/projectDetails/flyro',\n    num: 8\n  }\n};\nconst menuItems = [{\n  key: 'Flyro',\n  label: 'Flyro'\n}];\n\nconst InnerLayout = () => {\n  const {\n    state: {\n      scale: {\n        scale\n      }\n    },\n    actions: {\n      setScale,\n      setCurrentTab\n    }\n  } = useCurrentTab();\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(true);\n\n  const fallBackReactive = () => {\n    setScale(1);\n    const scale = Math.min(document.body.clientWidth / 1920, 1);\n    let metaEl = document.querySelector('meta[name=\"viewport\"]');\n\n    if (!metaEl) {\n      metaEl = document.createElement('meta');\n      metaEl.setAttribute('name', 'viewport');\n      metaEl.setAttribute('content', 'width=device-width, initial-scale=' + scale + ', maximum-scale=' + scale + ', minimum-scale=' + scale + ', user-scalable=no');\n      document.documentElement.firstElementChild.appendChild(metaEl);\n    } else {\n      metaEl.setAttribute('content', 'width=device-width, initial-scale=' + scale + ', maximum-scale=' + scale + ', minimum-scale=' + scale + ', user-scalable=no');\n    }\n\n    window.scrollTo({\n      top: 0\n    });\n  }; // innerWidth 比 body.offsetWidth 稳定\n\n\n  const {\n    IsDone\n  } = useComponentDidMount(() => {\n    setCurrentTab(1);\n\n    if (window.innerWidth >= 700) {\n      const scale = Math.max(Math.min(window.innerWidth / DESIGN_WIDTH, 1), 0.2);\n      setScale(scale);\n    } else {\n      fallBackReactive();\n    }\n\n    addCallback(() => {\n      const scale = Math.max(Math.min(window.innerWidth / DESIGN_WIDTH, 1), 0.2);\n      document.getElementsByTagName('html')[0].style.fontSize = `${scale}px`;\n      window.scrollTo({\n        top: 0\n      });\n      setScale(scale);\n    });\n  });\n  useEffect(() => {\n    setIsLoading(true);\n    document.getElementsByTagName('html')[0].style.fontSize = `${scale}px`;\n    window.scrollTo({\n      top: 0\n    }); // 强行将这次setState推迟到下次处理\n\n    setTimeout(() => {\n      setIsLoading(false);\n    }, 0);\n  }, [scale]);\n  const {\n    addCallback\n  } = useResizeCallback(fallBackReactive);\n  return IsDone && !isLoading ? __jsx(\"div\", {\n    className: styles.layout,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }, __jsx(LayoutHeader, {\n    menuItems: menuItems,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  }), __jsx(ContentSwitcher, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }, __jsx(Profile, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148\n    },\n    __self: this\n  }), __jsx(ProjectDetailItem, _extends({}, Info, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  })), __jsx(Projects, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  })), __jsx(LayoutHeader, {\n    menuItems: menuItems,\n    bodyStyle: {\n      marginTop: '138rem'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152\n    },\n    __self: this\n  })) : null;\n};\n\nconst Layout = () => {\n  return __jsx(CurrentTabProvider, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, __jsx(InnerLayout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }));\n};\n\nexport default Layout;","map":{"version":3,"sources":["/Users/tomokokawase/Desktop/Portfolio/pages/projects/flyro.tsx"],"names":["React","styles","LayoutHeader","useCurrentTab","CurrentTabProvider","ContentSwitcher","useComponentDidMount","useEffect","useState","useResizeCallback","ProjectDetailItem","Profile","Projects","DESIGN_WIDTH","COMMON_STATIC_PATH","Info","title","desc","mainColor","details","tags","images","src","sources","type","preview_src","preview_sources","alt","detail_images_meta","dir","num","video","affix_image_meta","menuItems","key","label","InnerLayout","state","scale","actions","setScale","setCurrentTab","isLoading","setIsLoading","fallBackReactive","Math","min","document","body","clientWidth","metaEl","querySelector","createElement","setAttribute","documentElement","firstElementChild","appendChild","window","scrollTo","top","IsDone","innerWidth","max","addCallback","getElementsByTagName","style","fontSize","setTimeout","layout","marginTop","Layout"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport styles from '../index.less';\nimport LayoutHeader from '../../components/LayoutHeader';\nimport {\n  useCurrentTab,\n  CurrentTabProvider\n} from '../../utils/hooks/useCurrentTab';\nimport { ContentSwitcher } from '../../components/ContentSwitcher';\nimport { useComponentDidMount } from '../../utils/hooks/useComponentDidMount';\nimport { useEffect, useState } from 'react';\nimport { useResizeCallback } from '../../utils/hooks/useResizeCallback';\nimport ProjectDetailItem, {\n  ProjectDetailInfoProps\n} from '../../components/Projects/ProjectDetail';\nimport Profile from '../../components/Profile';\nimport Projects from '../../components/Projects';\nconst DESIGN_WIDTH = 1920;\nconst COMMON_STATIC_PATH = '/static/images/projectDetails/img';\nconst Info: ProjectDetailInfoProps = {\n  title: 'Flyro',\n  desc: ['an inspiring spinning and', 'a mobile free zone'],\n  mainColor: '#1F204F',\n  details:\n    'To create a phone free zone, we offer you the optimal choice — flyro.It is a floating gyro, which can block and charge your phone.\\n' +\n    'Once you plug in the phone, the gyro can be empowered and spin during your working time. If you plug out from the plate, it would lose power and stop after 15 minutes.\\n' +\n    'Flyro helps you find the balance between work and play.',\n  tags: ['Integrated Product Development | Interaction Design | Team Work in 5 weeks | May 2018 '],\n  images: [\n    {\n      src: COMMON_STATIC_PATH + '3.jpg',\n      sources: [\n        {\n          src: COMMON_STATIC_PATH + '3.webp',\n          type: 'image/webp'\n        }\n      ],\n      preview_src: COMMON_STATIC_PATH + '3-preview.jpg',\n      preview_sources: [\n        {\n          src: COMMON_STATIC_PATH + '3-preview.webp',\n          type: 'image/webp'\n        }\n      ],\n      alt: 'Flyro'\n    }\n  ],\n  detail_images_meta: {\n    dir: '/static/images/projectDetails/flyro',\n    num: 12\n  },\n  video: [{\n    src: '/static/video.mp4'\n  }],\n  affix_image_meta: {\n    dir: '/static/images/projectDetails/flyro',\n    num: 8\n  }\n};\nconst menuItems = [\n  {\n    key: 'Flyro',\n    label: 'Flyro'\n  }\n];\nconst InnerLayout: React.FC<{}> = () => {\n  const {\n    state: {\n      scale: { scale }\n    },\n    actions: { setScale, setCurrentTab }\n  } = useCurrentTab();\n  const [isLoading, setIsLoading] = useState(true);\n  const fallBackReactive = () => {\n    setScale(1);\n    const scale = Math.min(document.body.clientWidth / 1920, 1);\n    let metaEl = document.querySelector('meta[name=\"viewport\"]');\n    if (!metaEl) {\n      metaEl = document.createElement('meta');\n      metaEl.setAttribute('name', 'viewport');\n      metaEl.setAttribute(\n        'content',\n        'width=device-width, initial-scale=' +\n          scale +\n          ', maximum-scale=' +\n          scale +\n          ', minimum-scale=' +\n          scale +\n          ', user-scalable=no'\n      );\n      document.documentElement.firstElementChild.appendChild(metaEl);\n    } else {\n      metaEl.setAttribute(\n        'content',\n        'width=device-width, initial-scale=' +\n          scale +\n          ', maximum-scale=' +\n          scale +\n          ', minimum-scale=' +\n          scale +\n          ', user-scalable=no'\n      );\n    }\n\n    window.scrollTo({\n      top: 0\n    });\n  };\n  // innerWidth 比 body.offsetWidth 稳定\n  const { IsDone } = useComponentDidMount(() => {\n    setCurrentTab(1);\n    if (window.innerWidth >= 700) {\n      const scale = Math.max(\n        Math.min(window.innerWidth / DESIGN_WIDTH, 1),\n        0.2\n      );\n      setScale(scale);\n    } else {\n      fallBackReactive();\n    }\n    addCallback(() => {\n      const scale = Math.max(\n        Math.min(window.innerWidth / DESIGN_WIDTH, 1),\n        0.2\n      );\n      document.getElementsByTagName('html')[0].style.fontSize = `${scale}px`;\n      window.scrollTo({\n        top: 0\n      });\n      setScale(scale);\n    });\n  });\n  useEffect(() => {\n    setIsLoading(true);\n    document.getElementsByTagName('html')[0].style.fontSize = `${scale}px`;\n    window.scrollTo({\n      top: 0\n    });\n    // 强行将这次setState推迟到下次处理\n    setTimeout(() => {\n      setIsLoading(false);\n    }, 0);\n  }, [scale]);\n  const { addCallback } = useResizeCallback(fallBackReactive);\n  return IsDone && !isLoading ? (\n    <div className={styles.layout}>\n      <LayoutHeader menuItems={menuItems} />\n      <ContentSwitcher>\n        <Profile />\n        <ProjectDetailItem {...Info} />\n        <Projects />\n      </ContentSwitcher>\n      <LayoutHeader\n        menuItems={menuItems}\n        bodyStyle={{\n          marginTop: '138rem'\n        }}\n      />\n    </div>\n  ) : null;\n};\n\nconst Layout: React.FC<{}> = () => {\n  return (\n    <CurrentTabProvider>\n      <InnerLayout />\n    </CurrentTabProvider>\n  );\n};\n\nexport default Layout;\n"]},"metadata":{},"sourceType":"module"}