{"ast":null,"code":"var __jsx = React.createElement;\nimport * as React from 'react';\nimport styles from '../index.less';\nimport LayoutHeader from '../../components/LayoutHeader';\nimport { useCurrentTab, CurrentTabProvider } from '../../utils/hooks/useCurrentTab';\nimport { ContentSwitcher } from '../../components/ContentSwitcher';\nimport { useComponentDidMount } from '../../utils/hooks/useComponentDidMount';\nimport { useEffect, useState } from 'react';\nimport { useResizeCallback } from '../../utils/hooks/useResizeCallback';\nimport ProjectDetailItem from '../../components/Projects/ProjectDetail';\nimport Profile from '../../components/Profile';\nimport Projects from '../../components/Projects';\nvar DESIGN_WIDTH = 1920;\nvar COMMON_STATIC_PATH = '/static/images/projectDetails/img';\nvar Info = {\n  title: 'EMO',\n  desc: ['a programming education robot and', 'an online education platform'],\n  tags: ['Integrated Product Development | STEAM Education Service Design | Team Work in 8 weeks | Oct 2017 '],\n  mainColor: '#304690',\n  details: \"EMO is an educational robot, applying applies Arduino to teach children aged 6-12 to learn programming and robot assembly, in order to stimulate creativity and prepare for advanced education. EMO's name comes from emotion. We hope that children could build up emotional connection with EMO robot. EMO has a pleasing appearance with two big eyes and a clear, easy-to-assemble internal structure. In addition to the physical model, we also created an online platform, in order to improve teaching efficiency and parental involvement. The physical robot and the online platform together form a sustainable STEAM education system that provides better services for  studens, teachers and parents.\",\n  images: [{\n    src: COMMON_STATIC_PATH + '4.jpg',\n    sources: [{\n      src: COMMON_STATIC_PATH + '4.webp',\n      type: 'image/webp'\n    }],\n    preview_src: COMMON_STATIC_PATH + '4-preview.jpg',\n    preview_sources: [{\n      src: COMMON_STATIC_PATH + '4-preview.webp',\n      type: 'image/webp'\n    }],\n    alt: 'EMO'\n  }]\n};\nvar menuItems = [{\n  key: 'EMO',\n  label: 'EMO'\n}];\n\nvar InnerLayout = function InnerLayout() {\n  var _useCurrentTab = useCurrentTab(),\n      scale = _useCurrentTab.state.scale.scale,\n      _useCurrentTab$action = _useCurrentTab.actions,\n      setScale = _useCurrentTab$action.setScale,\n      setCurrentTab = _useCurrentTab$action.setCurrentTab;\n\n  var _useState = useState(true),\n      isLoading = _useState[0],\n      setIsLoading = _useState[1];\n\n  var fallBackReactive = function fallBackReactive() {\n    setScale(1);\n    var scale = Math.min(document.body.clientWidth / 1920, 1);\n    var metaEl = document.querySelector('meta[name=\"viewport\"]');\n\n    if (!metaEl) {\n      metaEl = document.createElement('meta');\n      metaEl.setAttribute('name', 'viewport');\n      metaEl.setAttribute('content', 'width=device-width, initial-scale=' + scale + ', maximum-scale=' + scale + ', minimum-scale=' + scale + ', user-scalable=no');\n      document.documentElement.firstElementChild.appendChild(metaEl);\n    } else {\n      metaEl.setAttribute('content', 'width=device-width, initial-scale=' + scale + ', maximum-scale=' + scale + ', minimum-scale=' + scale + ', user-scalable=no');\n    }\n\n    window.scrollTo({\n      top: 0\n    });\n  }; // innerWidth 比 body.offsetWidth 稳定\n\n\n  var _useComponentDidMount = useComponentDidMount(function () {\n    setCurrentTab(1);\n\n    if (window.innerWidth >= 700) {\n      var _scale = Math.max(Math.min(window.innerWidth / DESIGN_WIDTH, 1), 0.2);\n\n      setScale(_scale);\n    } else {\n      fallBackReactive();\n    }\n\n    addCallback(function () {\n      var scale = Math.max(Math.min(window.innerWidth / DESIGN_WIDTH, 1), 0.2);\n      document.getElementsByTagName('html')[0].style.fontSize = \"\".concat(scale, \"px\");\n      window.scrollTo({\n        top: 0\n      });\n      setScale(scale);\n    });\n  }),\n      IsDone = _useComponentDidMount.IsDone;\n\n  useEffect(function () {\n    setIsLoading(true);\n    document.getElementsByTagName('html')[0].style.fontSize = \"\".concat(scale, \"px\");\n    window.scrollTo({\n      top: 0\n    }); // 强行将这次setState推迟到下次处理\n\n    setTimeout(function () {\n      setIsLoading(false);\n    }, 0);\n  }, [scale]);\n\n  var _useResizeCallback = useResizeCallback(fallBackReactive),\n      addCallback = _useResizeCallback.addCallback;\n\n  return IsDone && !isLoading ? __jsx(\"div\", {\n    className: styles.layout\n  }, __jsx(LayoutHeader, {\n    menuItems: menuItems\n  }), __jsx(ContentSwitcher, null, __jsx(Profile, null), __jsx(ProjectDetailItem, Info), __jsx(Projects, null)), __jsx(LayoutHeader, {\n    menuItems: menuItems,\n    bodyStyle: {\n      marginTop: '138rem'\n    }\n  })) : null;\n};\n\nvar Layout = function Layout() {\n  return __jsx(CurrentTabProvider, null, __jsx(InnerLayout, null));\n};\n\nexport default Layout;","map":null,"metadata":{},"sourceType":"module"}