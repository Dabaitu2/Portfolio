{"ast":null,"code":"export var useCheckWebP = function useCheckWebP() {\n  var isWebp = checkWebp();\n\n  function checkWebp() {\n    try {\n      return document.createElement('canvas').toDataURL('image/webp').indexOf('data:image/webp') == 0;\n    } catch (err) {\n      return false;\n    }\n  }\n\n  function autoWebP(src) {\n    src = src.replace(/\\s/g, ''); // https 协议访问存在问题 IE8，去 schema\n\n    if (/^http:/.test(src)) {\n      src = src.slice(5);\n    } // 支持 webp 格式\n\n\n    if (isWebp && /(taobaocdn|alicdn)\\.com/.test(src) && (src.indexOf(/.jpe?g/) || src.indexOf('.png')) && !/webp/.test(src) && !/\\/s\\.gif$/.test(src)) {\n      src += '_.webp';\n    } else if (src.lastIndexOf('_.webp') >= 0) {\n      src = src.split('_.webp')[0];\n    }\n\n    return src;\n  }\n\n  return {\n    autoWebP: autoWebP,\n    isWebp: isWebp\n  };\n};","map":{"version":3,"sources":["/Users/tomokokawase/Desktop/Portfolio/utils/checkWebP.ts"],"names":["useCheckWebP","isWebp","checkWebp","document","createElement","toDataURL","indexOf","err","autoWebP","src","replace","test","slice","lastIndexOf","split"],"mappings":"AAAA,OAAO,IAAMA,YAAY,GAAG,SAAfA,YAAe,GAAM;AAChC,MAAMC,MAAM,GAAGC,SAAS,EAAxB;;AACA,WAASA,SAAT,GAAqB;AACnB,QAAI;AACF,aACEC,QAAQ,CACLC,aADH,CACiB,QADjB,EAEGC,SAFH,CAEa,YAFb,EAGGC,OAHH,CAGW,iBAHX,KAGiC,CAJnC;AAMD,KAPD,CAOE,OAAOC,GAAP,EAAY;AACZ,aAAO,KAAP;AACD;AACF;;AACD,WAASC,QAAT,CAAkBC,GAAlB,EAAuB;AACrBA,IAAAA,GAAG,GAAGA,GAAG,CAACC,OAAJ,CAAY,KAAZ,EAAmB,EAAnB,CAAN,CADqB,CAErB;;AACA,QAAI,SAASC,IAAT,CAAcF,GAAd,CAAJ,EAAwB;AACtBA,MAAAA,GAAG,GAAGA,GAAG,CAACG,KAAJ,CAAU,CAAV,CAAN;AACD,KALoB,CAMrB;;;AACA,QACEX,MAAM,IACN,0BAA0BU,IAA1B,CAA+BF,GAA/B,CADA,KAECA,GAAG,CAACH,OAAJ,CAAY,QAAZ,KAAyBG,GAAG,CAACH,OAAJ,CAAY,MAAZ,CAF1B,KAGA,CAAC,OAAOK,IAAP,CAAYF,GAAZ,CAHD,IAIA,CAAC,YAAYE,IAAZ,CAAiBF,GAAjB,CALH,EAME;AACAA,MAAAA,GAAG,IAAI,QAAP;AACD,KARD,MAQO,IAAIA,GAAG,CAACI,WAAJ,CAAgB,QAAhB,KAA6B,CAAjC,EAAoC;AACzCJ,MAAAA,GAAG,GAAGA,GAAG,CAACK,KAAJ,CAAU,QAAV,EAAoB,CAApB,CAAN;AACD;;AACD,WAAOL,GAAP;AACD;;AACD,SAAO;AAACD,IAAAA,QAAQ,EAARA,QAAD;AAAWP,IAAAA,MAAM,EAANA;AAAX,GAAP;AACD,CAnCM","sourcesContent":["export const useCheckWebP = () => {\n  const isWebp = checkWebp();\n  function checkWebp() {\n    try {\n      return (\n        document\n          .createElement('canvas')\n          .toDataURL('image/webp')\n          .indexOf('data:image/webp') == 0\n      );\n    } catch (err) {\n      return false;\n    }\n  }\n  function autoWebP(src) {\n    src = src.replace(/\\s/g, '');\n    // https 协议访问存在问题 IE8，去 schema\n    if (/^http:/.test(src)) {\n      src = src.slice(5);\n    }\n    // 支持 webp 格式\n    if (\n      isWebp &&\n      /(taobaocdn|alicdn)\\.com/.test(src) &&\n      (src.indexOf(/.jpe?g/) || src.indexOf('.png')) &&\n      !/webp/.test(src) &&\n      !/\\/s\\.gif$/.test(src)\n    ) {\n      src += '_.webp';\n    } else if (src.lastIndexOf('_.webp') >= 0) {\n      src = src.split('_.webp')[0];\n    }\n    return src;\n  }\n  return {autoWebP, isWebp};\n};\n"]},"metadata":{},"sourceType":"module"}