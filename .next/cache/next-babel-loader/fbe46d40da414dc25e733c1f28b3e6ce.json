{"ast":null,"code":"var _jsxFileName = \"/Users/tomokokawase/Desktop/Portfolio/pages/index.tsx\";\nvar __jsx = React.createElement;\nimport * as React from 'react';\nimport styles from './index.less';\nimport LayoutHeader from '../components/LayoutHeader';\nimport Profile from '../components/Profile';\nimport { CurrentTabProvider, useCurrentTab } from '../utils/hooks/useCurrentTab';\nimport Projects from '../components/Projects';\nimport { ContentSwitcher } from '../components/ContentSwitcher';\nimport { useComponentDidMount } from '../utils/hooks/useComponentDidMount';\nimport { useEffect, useState } from 'react';\nimport { useResizeCallback } from '../utils/hooks/useResizeCallback';\nconst DESIGN_WIDTH = 1920;\n\nconst InnerLayout = () => {\n  const {\n    state: {\n      scale: {\n        scale\n      }\n    },\n    actions: {\n      setScale\n    }\n  } = useCurrentTab();\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(true);\n\n  const fallBackReactive = () => {\n    setScale(1);\n    const scale = Math.min(document.body.clientWidth / 1920, 1);\n    let metaEl = document.querySelector('meta[name=\"viewport\"]');\n\n    if (!metaEl) {\n      metaEl = document.createElement('meta');\n      metaEl.setAttribute('name', 'viewport');\n      metaEl.setAttribute('content', 'width=device-width, initial-scale=' + scale + ', maximum-scale=' + scale + ', minimum-scale=' + scale + ', user-scalable=no');\n      document.documentElement.firstElementChild.appendChild(metaEl);\n    } else {\n      metaEl.setAttribute('content', 'width=device-width, initial-scale=' + scale + ', maximum-scale=' + scale + ', minimum-scale=' + scale + ', user-scalable=no');\n    }\n\n    window.scrollTo({\n      top: 0\n    });\n  }; // innerWidth 比 body.offsetWidth 稳定\n\n\n  const {\n    IsDone\n  } = useComponentDidMount(() => {\n    if (window.innerWidth >= 700) {\n      const scale = Math.max(Math.min(window.innerWidth / DESIGN_WIDTH, 1), 0.2);\n      setScale(scale);\n    } else {\n      fallBackReactive();\n    }\n\n    addCallback(() => {\n      setIsLoading(true);\n      const scale = Math.max(Math.min(window.innerWidth / DESIGN_WIDTH, 1), 0.2);\n      document.getElementsByTagName('html')[0].style.fontSize = `${scale}px`;\n      window.scrollTo({\n        top: 0\n      });\n      setScale(scale);\n      setIsLoading(false);\n    });\n    setIsLoading(false);\n  });\n  useEffect(() => {\n    document.getElementsByTagName('html')[0].style.fontSize = `${scale}px`;\n    window.scrollTo({\n      top: 0\n    });\n  }, [scale]);\n  const {\n    addCallback\n  } = useResizeCallback(fallBackReactive);\n  return IsDone ? __jsx(\"div\", {\n    className: styles.layout,\n    style: {\n      filter: isLoading ? 'blur(3px)' : 'none'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, __jsx(LayoutHeader, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }), __jsx(ContentSwitcher, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, __jsx(React.Fragment, null, __jsx(Profile, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }), __jsx(Projects, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }))), __jsx(LayoutHeader, {\n    bodyStyle: {\n      marginTop: '138rem'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  })) : null;\n};\n\nconst Layout = () => {\n  return __jsx(CurrentTabProvider, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, __jsx(InnerLayout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }));\n};\n\nexport default Layout;","map":{"version":3,"sources":["/Users/tomokokawase/Desktop/Portfolio/pages/index.tsx"],"names":["React","styles","LayoutHeader","Profile","CurrentTabProvider","useCurrentTab","Projects","ContentSwitcher","useComponentDidMount","useEffect","useState","useResizeCallback","DESIGN_WIDTH","InnerLayout","state","scale","actions","setScale","isLoading","setIsLoading","fallBackReactive","Math","min","document","body","clientWidth","metaEl","querySelector","createElement","setAttribute","documentElement","firstElementChild","appendChild","window","scrollTo","top","IsDone","innerWidth","max","addCallback","getElementsByTagName","style","fontSize","layout","filter","marginTop","Layout"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport styles from './index.less';\nimport LayoutHeader from '../components/LayoutHeader';\nimport Profile from '../components/Profile';\nimport {\n  CurrentTabProvider,\n  useCurrentTab\n} from '../utils/hooks/useCurrentTab';\nimport Projects from '../components/Projects';\nimport { ContentSwitcher } from '../components/ContentSwitcher';\nimport { useComponentDidMount } from '../utils/hooks/useComponentDidMount';\nimport { useEffect, useState } from 'react';\nimport { useResizeCallback } from '../utils/hooks/useResizeCallback';\nconst DESIGN_WIDTH = 1920;\nconst InnerLayout: React.FC<{}> = () => {\n  const {\n    state: {\n      scale: { scale }\n    },\n    actions: { setScale }\n  } = useCurrentTab();\n  const [isLoading, setIsLoading] = useState(true);\n  const fallBackReactive = () => {\n    setScale(1);\n    const scale = Math.min(document.body.clientWidth / 1920, 1);\n    let metaEl = document.querySelector('meta[name=\"viewport\"]');\n    if (!metaEl) {\n      metaEl = document.createElement('meta');\n      metaEl.setAttribute('name', 'viewport');\n      metaEl.setAttribute(\n        'content',\n        'width=device-width, initial-scale=' +\n          scale +\n          ', maximum-scale=' +\n          scale +\n          ', minimum-scale=' +\n          scale +\n          ', user-scalable=no'\n      );\n      document.documentElement.firstElementChild.appendChild(metaEl);\n    } else {\n      metaEl.setAttribute(\n        'content',\n        'width=device-width, initial-scale=' +\n          scale +\n          ', maximum-scale=' +\n          scale +\n          ', minimum-scale=' +\n          scale +\n          ', user-scalable=no'\n      );\n    }\n\n    window.scrollTo({\n      top: 0\n    });\n  };\n  // innerWidth 比 body.offsetWidth 稳定\n  const { IsDone } = useComponentDidMount(() => {\n    if (window.innerWidth >= 700) {\n      const scale = Math.max(\n        Math.min(window.innerWidth / DESIGN_WIDTH, 1),\n        0.2\n      );\n      setScale(scale);\n    } else {\n      fallBackReactive();\n    }\n    addCallback(() => {\n      setIsLoading(true);\n      const scale = Math.max(\n        Math.min(window.innerWidth / DESIGN_WIDTH, 1),\n        0.2\n      );\n      document.getElementsByTagName('html')[0].style.fontSize = `${scale}px`;\n      window.scrollTo({\n        top: 0\n      });\n      setScale(scale);\n      setIsLoading(false);\n    });\n    setIsLoading(false);\n  });\n  useEffect(() => {\n    document.getElementsByTagName('html')[0].style.fontSize = `${scale}px`;\n    window.scrollTo({\n      top: 0\n    });\n  }, [scale]);\n  const { addCallback } = useResizeCallback(fallBackReactive);\n  return IsDone ? (\n    <div\n      className={styles.layout}\n      style={{\n        filter: isLoading ? 'blur(3px)' : 'none'\n      }}\n    >\n      <LayoutHeader />\n      <ContentSwitcher>\n        <>\n          <Profile />\n          <Projects />\n        </>\n      </ContentSwitcher>\n      <LayoutHeader\n        bodyStyle={{\n          marginTop: '138rem'\n        }}\n      />\n    </div>\n  ) : null;\n};\n\nconst Layout: React.FC<{}> = () => {\n  return (\n    <CurrentTabProvider>\n      <InnerLayout />\n    </CurrentTabProvider>\n  );\n};\n\nexport default Layout;\n"]},"metadata":{},"sourceType":"module"}