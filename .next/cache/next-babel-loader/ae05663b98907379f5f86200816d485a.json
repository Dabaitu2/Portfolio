{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nvar _jsxFileName = \"/Users/tomokokawase/Desktop/Portfolio/pages/projects/Bamboo.tsx\";\nvar __jsx = React.createElement;\nimport * as React from 'react';\nimport styles from '../index.less';\nimport LayoutHeader from '../../components/LayoutHeader';\nimport { useCurrentTab, CurrentTabProvider } from '../../utils/hooks/useCurrentTab';\nimport { ContentSwitcher } from '../../components/ContentSwitcher';\nimport { useComponentDidMount } from '../../utils/hooks/useComponentDidMount';\nimport { useEffect, useState } from 'react';\nimport { useResizeCallback } from '../../utils/hooks/useResizeCallback';\nimport ProjectDetailItem from '../../components/Projects/ProjectDetail';\nimport Profile from '../../components/Profile';\nimport Projects from '../../components/Projects';\nvar DESIGN_WIDTH = 1920;\nvar COMMON_STATIC_PATH = '/static/images/projectDetails/img';\nvar Info = {\n  title: 'Bamboo Stool',\n  desc: ['an exploration of bamboo craft', 'in modern aesthetic'],\n  tags: 'Stool Design | Bamboo Craft | Personal Work in 4 weeks | Dec 2016 '.split('|').map(function (t) {\n    return t.trim();\n  }),\n  mainColor: '#587C62',\n  details: 'Bamboo Stool is composed of three groups of repeating raw bamboo strips, exploring the aesthetics of bamboo’s physical properties. To keep the balance between aethetics of raw bamboo strips and the function of load-bearing, I created the special structure of the stool. The three stool legs and the upper surface formed two symmetrical triangles, and every bamboo strip is heated and bent to be crossed or connected with each other. During the handmaking process, Bamboo Stool only requires the same group of mould, according to the construction rule. And I tested di\u001ferent heating temperature, mould sizes and assembly\\n' + 'methods to suit raw bamboo strip’s properties.',\n  images: [{\n    src: COMMON_STATIC_PATH + '2.jpg',\n    sources: [{\n      src: COMMON_STATIC_PATH + '2.webp',\n      type: 'image/webp'\n    }],\n    preview_src: COMMON_STATIC_PATH + '2-preview.jpg',\n    preview_sources: [{\n      src: COMMON_STATIC_PATH + '2-preview.webp',\n      type: 'image/webp'\n    }],\n    alt: 'String board'\n  }]\n};\nvar menuItems = [{\n  key: 'Bamboo Stool',\n  label: 'Bamboo Stool'\n}];\n\nvar InnerLayout = function InnerLayout() {\n  var _useCurrentTab = useCurrentTab(),\n      scale = _useCurrentTab.state.scale.scale,\n      _useCurrentTab$action = _useCurrentTab.actions,\n      setScale = _useCurrentTab$action.setScale,\n      setCurrentTab = _useCurrentTab$action.setCurrentTab;\n\n  var _useState = useState(true),\n      isLoading = _useState[0],\n      setIsLoading = _useState[1];\n\n  var fallBackReactive = function fallBackReactive() {\n    setScale(1);\n    var scale = Math.min(document.body.clientWidth / 1920, 1);\n    var metaEl = document.querySelector('meta[name=\"viewport\"]');\n\n    if (!metaEl) {\n      metaEl = document.createElement('meta');\n      metaEl.setAttribute('name', 'viewport');\n      metaEl.setAttribute('content', 'width=device-width, initial-scale=' + scale + ', maximum-scale=' + scale + ', minimum-scale=' + scale + ', user-scalable=no');\n      document.documentElement.firstElementChild.appendChild(metaEl);\n    } else {\n      metaEl.setAttribute('content', 'width=device-width, initial-scale=' + scale + ', maximum-scale=' + scale + ', minimum-scale=' + scale + ', user-scalable=no');\n    }\n\n    window.scrollTo({\n      top: 0\n    });\n  }; // innerWidth 比 body.offsetWidth 稳定\n\n\n  var _useComponentDidMount = useComponentDidMount(function () {\n    setCurrentTab(1);\n\n    if (window.innerWidth >= 700) {\n      var _scale = Math.max(Math.min(window.innerWidth / DESIGN_WIDTH, 1), 0.2);\n\n      setScale(_scale);\n    } else {\n      fallBackReactive();\n    }\n\n    addCallback(function () {\n      var scale = Math.max(Math.min(window.innerWidth / DESIGN_WIDTH, 1), 0.2);\n      document.getElementsByTagName('html')[0].style.fontSize = \"\".concat(scale, \"px\");\n      window.scrollTo({\n        top: 0\n      });\n      setScale(scale);\n    });\n  }),\n      IsDone = _useComponentDidMount.IsDone;\n\n  useEffect(function () {\n    setIsLoading(true);\n    document.getElementsByTagName('html')[0].style.fontSize = \"\".concat(scale, \"px\");\n    window.scrollTo({\n      top: 0\n    }); // 强行将这次setState推迟到下次处理\n\n    setTimeout(function () {\n      setIsLoading(false);\n    }, 0);\n  }, [scale]);\n\n  var _useResizeCallback = useResizeCallback(fallBackReactive),\n      addCallback = _useResizeCallback.addCallback;\n\n  return IsDone && !isLoading ? __jsx(\"div\", {\n    className: styles.layout,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, __jsx(LayoutHeader, {\n    menuItems: menuItems,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }), __jsx(ContentSwitcher, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }, __jsx(Profile, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }), __jsx(ProjectDetailItem, _extends({}, Info, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  })), __jsx(Projects, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  })), __jsx(LayoutHeader, {\n    menuItems: menuItems,\n    bodyStyle: {\n      marginTop: '138rem'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  })) : null;\n};\n\nvar Layout = function Layout() {\n  return __jsx(CurrentTabProvider, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154\n    },\n    __self: this\n  }, __jsx(InnerLayout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155\n    },\n    __self: this\n  }));\n};\n\nexport default Layout;","map":{"version":3,"sources":["/Users/tomokokawase/Desktop/Portfolio/pages/projects/Bamboo.tsx"],"names":["React","styles","LayoutHeader","useCurrentTab","CurrentTabProvider","ContentSwitcher","useComponentDidMount","useEffect","useState","useResizeCallback","ProjectDetailItem","Profile","Projects","DESIGN_WIDTH","COMMON_STATIC_PATH","Info","title","desc","tags","split","map","t","trim","mainColor","details","images","src","sources","type","preview_src","preview_sources","alt","menuItems","key","label","InnerLayout","scale","state","actions","setScale","setCurrentTab","isLoading","setIsLoading","fallBackReactive","Math","min","document","body","clientWidth","metaEl","querySelector","createElement","setAttribute","documentElement","firstElementChild","appendChild","window","scrollTo","top","innerWidth","max","addCallback","getElementsByTagName","style","fontSize","IsDone","setTimeout","layout","marginTop","Layout"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport styles from '../index.less';\nimport LayoutHeader from '../../components/LayoutHeader';\nimport {\n  useCurrentTab,\n  CurrentTabProvider\n} from '../../utils/hooks/useCurrentTab';\nimport { ContentSwitcher } from '../../components/ContentSwitcher';\nimport { useComponentDidMount } from '../../utils/hooks/useComponentDidMount';\nimport { useEffect, useState } from 'react';\nimport { useResizeCallback } from '../../utils/hooks/useResizeCallback';\nimport ProjectDetailItem, {\n  ProjectDetailInfoProps\n} from '../../components/Projects/ProjectDetail';\nimport Profile from '../../components/Profile';\nimport Projects from '../../components/Projects';\nconst DESIGN_WIDTH = 1920;\nconst COMMON_STATIC_PATH = '/static/images/projectDetails/img';\nconst Info: ProjectDetailInfoProps = {\n  title: 'Bamboo Stool',\n  desc: ['an exploration of bamboo craft', 'in modern aesthetic'],\n  tags: 'Stool Design | Bamboo Craft | Personal Work in 4 weeks | Dec 2016 '\n    .split('|')\n    .map(t => t.trim()),\n  mainColor: '#587C62',\n  details:\n    'Bamboo Stool is composed of three groups of repeating raw bamboo strips, exploring the aesthetics of bamboo’s physical properties. To keep the balance between aethetics of raw bamboo strips and the function of load-bearing, I created the special structure of the stool. The three stool legs and the upper surface formed two symmetrical triangles, and every bamboo strip is heated and bent to be crossed or connected with each other. During the handmaking process, Bamboo Stool only requires the same group of mould, according to the construction rule. And I tested di\u001ferent heating temperature, mould sizes and assembly\\n' +\n    'methods to suit raw bamboo strip’s properties.',\n  images: [\n    {\n      src: COMMON_STATIC_PATH + '2.jpg',\n      sources: [\n        {\n          src: COMMON_STATIC_PATH + '2.webp',\n          type: 'image/webp'\n        }\n      ],\n      preview_src: COMMON_STATIC_PATH + '2-preview.jpg',\n      preview_sources: [\n        {\n          src: COMMON_STATIC_PATH + '2-preview.webp',\n          type: 'image/webp'\n        }\n      ],\n      alt: 'String board'\n    }\n  ]\n};\nconst menuItems = [\n  {\n    key: 'Bamboo Stool',\n    label: 'Bamboo Stool'\n  }\n];\nconst InnerLayout: React.FC<{}> = () => {\n  const {\n    state: {\n      scale: { scale }\n    },\n    actions: { setScale, setCurrentTab }\n  } = useCurrentTab();\n  const [isLoading, setIsLoading] = useState(true);\n  const fallBackReactive = () => {\n    setScale(1);\n    const scale = Math.min(document.body.clientWidth / 1920, 1);\n    let metaEl = document.querySelector('meta[name=\"viewport\"]');\n    if (!metaEl) {\n      metaEl = document.createElement('meta');\n      metaEl.setAttribute('name', 'viewport');\n      metaEl.setAttribute(\n        'content',\n        'width=device-width, initial-scale=' +\n          scale +\n          ', maximum-scale=' +\n          scale +\n          ', minimum-scale=' +\n          scale +\n          ', user-scalable=no'\n      );\n      document.documentElement.firstElementChild.appendChild(metaEl);\n    } else {\n      metaEl.setAttribute(\n        'content',\n        'width=device-width, initial-scale=' +\n          scale +\n          ', maximum-scale=' +\n          scale +\n          ', minimum-scale=' +\n          scale +\n          ', user-scalable=no'\n      );\n    }\n\n    window.scrollTo({\n      top: 0\n    });\n  };\n  // innerWidth 比 body.offsetWidth 稳定\n  const { IsDone } = useComponentDidMount(() => {\n    setCurrentTab(1);\n    if (window.innerWidth >= 700) {\n      const scale = Math.max(\n        Math.min(window.innerWidth / DESIGN_WIDTH, 1),\n        0.2\n      );\n      setScale(scale);\n    } else {\n      fallBackReactive();\n    }\n    addCallback(() => {\n      const scale = Math.max(\n        Math.min(window.innerWidth / DESIGN_WIDTH, 1),\n        0.2\n      );\n      document.getElementsByTagName('html')[0].style.fontSize = `${scale}px`;\n      window.scrollTo({\n        top: 0\n      });\n      setScale(scale);\n    });\n  });\n  useEffect(() => {\n    setIsLoading(true);\n    document.getElementsByTagName('html')[0].style.fontSize = `${scale}px`;\n    window.scrollTo({\n      top: 0\n    });\n    // 强行将这次setState推迟到下次处理\n    setTimeout(() => {\n      setIsLoading(false);\n    }, 0);\n  }, [scale]);\n  const { addCallback } = useResizeCallback(fallBackReactive);\n  return IsDone && !isLoading ? (\n    <div className={styles.layout}>\n      <LayoutHeader menuItems={menuItems} />\n      <ContentSwitcher>\n        <Profile />\n        <ProjectDetailItem {...Info} />\n        <Projects />\n      </ContentSwitcher>\n      <LayoutHeader\n        menuItems={menuItems}\n        bodyStyle={{\n          marginTop: '138rem'\n        }}\n      />\n    </div>\n  ) : null;\n};\n\nconst Layout: React.FC<{}> = () => {\n  return (\n    <CurrentTabProvider>\n      <InnerLayout />\n    </CurrentTabProvider>\n  );\n};\n\nexport default Layout;\n"]},"metadata":{},"sourceType":"module"}