{"ast":null,"code":"export var useCheckWebP = function useCheckWebP() {\n  var isWebp = checkWebp();\n\n  function checkWebp() {\n    try {\n      return document.createElement('canvas').toDataURL('image/webp').indexOf('data:image/webp') == 0;\n    } catch (err) {\n      return false;\n    }\n  }\n\n  function autoWebP(src) {\n    src = src.replace(/\\s/g, ''); // https 协议访问存在问题 IE8，去 schema\n\n    if (/^http:/.test(src)) {\n      src = src.slice(5);\n    } // 支持 webp 格式\n\n\n    if (isWebp && /(taobaocdn|alicdn)\\.com/.test(src) && (src.indexOf(/.jpe?g/) || src.indexOf('.png')) && !/webp/.test(src) && !/\\/s\\.gif$/.test(src)) {\n      src += '_.webp';\n    } else if (src.lastIndexOf('_.webp') >= 0) {\n      src = src.split('_.webp')[0];\n    }\n\n    return src;\n  }\n\n  return {\n    autoWebP: autoWebP,\n    isWebp: isWebp\n  };\n};","map":null,"metadata":{},"sourceType":"module"}